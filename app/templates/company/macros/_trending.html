{% macro trending(companies) %}

<div class="col-12 left-side-box p-3">
    <div class="d-flex left-side-box-header">
        <i class="fa fa-line-chart" aria-hidden="true"></i>
        <span>Trending</span>
    </div>
    <hr class="m-2">
    <div class="d-flex row m-0">
        {% for t_company in companies %}
        {% set t_stock = t_company.history[0] %}
        {% set t_stock_change = (t_stock.close|float - t_stock.open|float)|abs %}
        {% set t_stock_change_percentage = (100 * (t_stock_change / t_stock.open|float))|round(2, 'floor')  %}
        <div class="treding-item p-0 m-1 col-12 
        {% if t_stock.close < t_stock.open %}red-sm-border{% else %}green-sm-border{% endif %}" data-src="/companies/{{t_company.code}}">
            <span>{{ t_company.code }}</span>
            <span>{{ t_stock.close }}</span>
            <span class="float-right">({{ t_stock_change }})&nbsp; {{ t_stock_change_percentage }}% &nbsp;</span>
        </div>
        {% endfor %}
    </div>
</div>
{% endmacro %}
